# heripo engine 로드맵

[English](./roadmap.md) | **한국어**

## 비전

고고학 발굴조사보고서 PDF에서 구조화된 데이터를 추출하고, 표준 형식으로 정규화한 후 데이터베이스에 저장하여 체계적인 분석과 활용을 가능하게 합니다.

## 데이터 파이프라인

```
원천 데이터 추출 → 고고학 데이터 원장 → 고고학 데이터 표준 → 분야별 온톨로지 → DB 저장
```

각 단계:

1. **원천 데이터 추출**: PDF 보고서의 양식 그대로 구조적으로 추출한 **문서 데이터**
   - DoclingDocument: PDF에서 추출한 텍스트, 표, 이미지 정보
   - ProcessedDocument: 목차/챕터/페이지 구조로 정제된 문서
   - 고고학적 해석 없이 문서 구조만 추출
2. **고고학 데이터 원장**: 전세계 고고학을 포괄하는 범용 모델로 구조화된 **불변의 원장**
   - 지역/시대/분야를 가리지 않는 범용 고고학 개념 모델
   - 문서 데이터에서 고고학적 개념(유구, 유물, 층위 등)으로 변환
   - 표준화 전 단계이지만 정규화를 전제로 설계
3. **고고학 데이터 표준**: 확장 가능한 표준 모델로 정규화된 데이터
   - 기본 표준: 한국고고학 표준 등 국가/지역별 기본 표준
   - 확장 표준: 신라 고분 표준, 백제 토기 표준 등 세부 분야별 확장
   - 필요에 따라 다양한 하위 표준 생성 가능
4. **분야별 온톨로지**: 도메인 특화 시맨틱 모델
   - 온톨로지 기반 의미론적 검색
   - 지식 그래프 구축
5. **DB 저장**: 각 파이프라인 단계별로 독립적 저장 및 활용 가능
   - 단계별 데이터는 별도로 관리되며 각각의 활용 목적을 가짐

## 현재 상태 (v0.1.x)

### ✅ 구현 완료

**PDF 파싱 및 OCR**

- Docling SDK를 활용한 PDF 파싱
- Apple Silicon GPU 가속 OCR
- 고품질 한국어 문서 인식
- 이미지 자동 추출

**문서 구조 추출**

- 규칙 기반 + LLM 폴백 목차 추출
  - TocFinder: 키워드 및 구조 분석
  - VisionTocExtractor: Vision LLM 폴백
  - TocExtractor: 계층적 구조 추출
- 페이지 범위 매핑 (Vision LLM)
- 챕터 계층 구조 생성

**리소스 처리**

- 이미지 추출 및 캡션 파싱
- 테이블 추출 및 캡션 파싱
- LLM 기반 검증 (TocContentValidator, CaptionValidator)

**LLM 통합**

- Vercel AI SDK 통합
- 다중 LLM 프로파이더 지원 (OpenAI, Anthropic, Google, Together)
- Fallback 재시도 메커니즘
- 토큰 사용량 추적

## 계획된 기능

### v0.2.x - 데이터 원장

**목표**: 전세계 고고학을 포괄하는 범용 모델로 구조화된 **불변의 원장** 생성

**설계 철학:**

- **범용성**: 지역/시대/분야를 가리지 않고 전세계 고고학 데이터를 수용할 수 있는 모델
- **불변성**: 한번 기록된 원장 데이터는 변경되지 않으며, 원천 문서의 내용을 충실히 반영
- **정규화 전제**: 표준화를 위한 기반 데이터로서, 정규화가 가능한 구조로 설계

**주요 작업:**

1. **범용 스키마 설계**
   - 전세계 고고학을 포괄하는 범용 데이터 모델 정의
   - 핵심 고고학 개념 추상화 (유구, 유물, 층위, 조사구역 등)
   - 확장 가능한 메타데이터 구조 설계
   - _세부 스키마는 추후 확정_

2. **고고학 개념 추출 파이프라인**
   - 유구(遺構/Feature) 정보 추출
   - 유물(遺物/Artifact) 정보 추출
   - 층위(層位/Stratum) 정보 추출
   - 조사구역(Trench/Unit) 정보 추출
   - _세부 추출 항목은 추후 확정_

3. **테이블 파싱 강화**
   - 일람표 자동 파싱
   - 관계표 파싱
   - 다양한 보고서 양식 대응

4. **LLM 기반 정보 추출**
   - 텍스트에서 고고학 개념 추출
   - 도면 및 사진 설명에서 정보 추출
   - 개념 간 관계 파악

5. **데이터 모델 구현**
   - `ArchaeologyLedger` 범용 모델
   - 확장 가능한 엔티티 타입 정의
   - 검증 로직

**예상 출력 (참고용 예시, 세부 구조는 미확정):**

```typescript
// 아래는 개념적 예시이며, 실제 구현 시 변경될 수 있습니다
interface ArchaeologyLedger {
  reportId: string;
  features: Feature[]; // 유구
  artifacts: Artifact[]; // 유물
  strata: Stratum[]; // 층위
  units: Unit[]; // 조사구역
  metadata: ReportMetadata;
  // 세부 필드는 추후 확정
}
```

### v0.3.x - 표준화

**목표**: 확장 가능한 표준 모델로 원장 데이터를 정규화

**설계 철학:**

표준 데이터는 **계층적 확장 모델**로 설계됩니다:

```
기본 표준 (Base Standard)
└── 국가/지역별 표준 (Regional Standard)
    └── 분야별 확장 표준 (Domain Extension)
```

**표준 계층 예시:**

| 계층        | 예시                                                              |
| ----------- | ----------------------------------------------------------------- |
| 기본 표준   | 범용 고고학 표준                                                  |
| 국가별 표준 | 한국고고학 표준, 일본고고학 표준, 영국고고학 표준 등              |
| 분야별 확장 | 신라 고분 표준, 백제 토기 표준, 마한 분묘 표준, 가야 철기 표준 등 |

**주요 작업:**

1. **확장 가능한 표준 포맷 설계**
   - 기본 표준: 전세계 공통 고고학 용어 및 분류 체계
   - 국가/지역별 표준: 해당 지역 고고학 용어집 기반 확장
   - 분야별 확장 표준: 특정 시대/유적/유물 유형에 특화된 표준
   - _세부 표준 스키마는 추후 확정_

2. **정규화 파이프라인**
   - 원장 데이터 → 기본 표준 변환
   - 기본 표준 → 국가/지역별 표준 확장
   - 필요시 분야별 확장 표준 적용
   - 단위 표준화, 시대 분류 표준화

3. **데이터 검증**
   - 각 표준 계층별 필수 필드 검증
   - 데이터 형식 검증
   - 참조 무결성 검증

4. **매핑 규칙**
   - 원장 용어 → 표준 용어 매핑
   - LLM 기반 애매한 케이스 처리
   - 커뮤니티 기여를 통한 매핑 규칙 확장

**예상 출력 (참고용 예시, 세부 구조는 미확정):**

```typescript
// 아래는 개념적 예시이며, 실제 구현 시 변경될 수 있습니다
interface StandardArchaeologyData {
  reportId: string;
  baseStandard: string; // 적용된 기본 표준
  regionalStandard?: string; // 적용된 지역 표준
  domainExtensions?: string[]; // 적용된 분야별 확장 표준
  standardFeatures: StandardFeature[];
  standardArtifacts: StandardArtifact[];
  standardStrata: StandardStratum[];
  validationResults: ValidationResult[];
  // 세부 필드는 추후 확정
}
```

### v0.4.x - 분야별 온톨로지

**목표**: 도메인 특화 시맨틱 모델 및 지식 그래프 구축

**주요 작업:**

1. **온톨로지 설계**
   - 고고학 분야별 온톨로지 (선사, 역사, 산업 등)
   - 시대별 특화 모델
   - 지역별 특화 모델
   - _세부 온톨로지 구조는 추후 확정_

2. **관계 추론**
   - 유구-유물 관계
   - 층위-시대 관계
   - 공간적 관계 (조사구역-유구)
   - 지식 그래프 구축

3. **의미론적 검색**
   - 온톨로지 기반 시맨틱 쿼리
   - 유사 유구/유물 검색
   - 분포 패턴 분석
   - _세부 검색 기능은 추후 확정_

### v1.0.x - 프로덕션 준비

**목표**: 안정적이고 확장 가능한 프로덕션 시스템

**주요 작업:**

1. **성능 최적화**
   - 대용량 PDF 처리 최적화
   - LLM 호출 최적화 (배칭, 캐싱)
   - 병렬 처리 개선

2. **API 안정성**
   - 엄격한 버전 관리
   - Breaking Changes 최소화
   - 포괄적인 에러 핸들링

3. **테스트 커버리지**
   - 엔드투엔드 테스트
   - 통합 테스트 강화
   - 성능 테스트

4. **운영 도구**
   - 모니터링 및 로깅
   - 에러 리포팅
   - 성능 프로파일링

5. **문서화**
   - API 레퍼런스 완성
   - 튜토리얼 및 가이드
   - 베스트 프랙티스

6. **커뮤니티**
   - 플러그인 시스템
   - 확장 포인트 문서화
   - 기여자 가이드 강화

## 미래 비전

### v2.0+ - 고급 기능

- **다국어 지원**: 영어, 중국어, 일본어 보고서 처리
- **3D 데이터 처리**: 도면 및 3D 스캔 데이터 통합
- **시계열 분석**: 다중 보고서 간 비교 분석
- **GIS 통합**: 공간 데이터 시각화 및 분석
- **자동 보고서 생성**: 추출된 데이터 기반 자동 요약

### 커뮤니티 기여 환영

heripo engine은 전세계 고고학 커뮤니티의 다양한 기여를 환영합니다. 국가, 지역, 문화권을 가리지 않고 누구나 참여할 수 있습니다.

#### 🌍 지역별 표준 기여

전세계 각 지역의 고고학 표준을 함께 만들어갑니다:

- **동아시아**: 한국, 일본, 중국, 대만, 몽골
- **동남아시아**: 베트남, 태국, 캄보디아, 인도네시아, 필리핀
- **남아시아**: 인도, 파키스탄, 스리랑카, 네팔
- **중앙아시아**: 우즈베키스탄, 카자흐스탄, 키르기스스탄
- **중동 및 서아시아**: 이란, 이라크, 터키, 이스라엘, 요르단, 이집트
- **유럽**: 영국, 프랑스, 독일, 이탈리아, 스페인, 그리스, 북유럽
- **아프리카**: 이집트, 에티오피아, 남아프리카공화국, 케냐
- **아메리카**: 미국, 멕시코, 페루, 브라질, 아르헨티나
- **오세아니아**: 호주, 뉴질랜드, 폴리네시아

#### 🏛️ 분야별 온톨로지 기여

다양한 시대와 분야의 온톨로지를 함께 구축합니다:

- **시대별**: 선사시대, 청동기, 철기, 고대, 중세, 근대
- **유적 유형별**: 주거지, 분묘, 생산유적, 관방유적, 종교유적
- **유물 유형별**: 토기, 석기, 금속기, 목기, 유리, 직물
- **특수 분야**: 수중고고학, 산업고고학, 도시고고학, 환경고고학

#### 🌐 다국어 지원 기여

다양한 언어로 시스템을 확장합니다:

- 한국어, 영어, 중국어(간체/번체), 일본어
- 아랍어, 페르시아어, 히브리어
- 스페인어, 포르투갈어, 프랑스어, 독일어, 이탈리아어
- 힌디어, 타밀어, 벵골어
- 러시아어, 폴란드어, 체코어

#### 🔧 기술 기여

- 새로운 LLM 프로바이더 통합
- PDF 외 추가 문서 형식 지원 (DOCX, HTML, XML 등)
- Linux/Windows 플랫폼 지원
- 분야별 특화 프로세서 개발
- 성능 최적화 및 버그 수정
- 문서화 및 번역

## 마일스톤

| 버전   | 목표             | 주요 기능                   | 상태      |
| ------ | ---------------- | --------------------------- | --------- |
| v0.1.x | 원천 데이터 추출 | PDF 파싱, 문서 구조 추출    | ✅ 완료   |
| v0.2.x | 불변의 원장      | 범용 고고학 모델, 개념 추출 | 🔜 계획됨 |
| v0.3.x | 확장 표준화      | 계층적 표준 모델, 정규화    | 🔜 계획됨 |
| v0.4.x | 온톨로지         | 시맨틱 모델, 지식 그래프    | 🔜 계획됨 |
| v1.0.x | 프로덕션         | 성능, 안정성, 문서화        | 🔜 계획됨 |

## 피드백 및 제안

로드맵에 대한 피드백이나 새로운 기능 제안은 [GitHub Discussions](https://github.com/heripo-lab/heripo-engine/discussions)에서 환영합니다!

---

**heripo lab** | [GitHub](https://github.com/heripo-lab) | [heripo engine](https://github.com/heripo-lab/heripo-engine)
